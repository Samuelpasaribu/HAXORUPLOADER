const encryptedCode = 'Ly8gS29uZmlndXJhc2kgRmlyZWJhc2UgKHNlc3VhaWthbiBkZW5nYW4gcHJveWVrIEZpcmViYXNlIEFuZGEpCiAgICAgICAgdmFyIGZpcmViYXNlQ29uZmlnID0gewogICAgICAgICAgICBhcGlLZXk6ICJBSXphU3lCaXllT3diUWVXbXlMNjFNckNRUzRTakVsQUNxQjZLOEUiLAogICAgICAgICAgICBhdXRoRG9tYWluOiAiYW5vbnltb3VzY29kZS5maXJlYmFzZWFwcC5jb20iLAogICAgICAgICAgICBwcm9qZWN0SWQ6ICJhbm9ueW1vdXNjb2RlIiwKICAgICAgICAgICAgc3RvcmFnZUJ1Y2tldDogImFub255bW91c2NvZGUuYXBwc3BvdC5jb20iLAogICAgICAgICAgICBtZXNzYWdpbmdTZW5kZXJJZDogIjE3MDQ4NjE3NjQ2NiIsCiAgICAgICAgICAgIGFwcElkOiAiMToxNzA0ODYxNzY0NjY6d2ViOmMxMzkxODVjM2JlZDUwNzQ1NmFiMGIiCiAgICAgICAgfTsKCiAgICAgICAgLy8gSW5pc2lhbGlzYXNpIEZpcmViYXNlCiAgICAgICAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7CgogICAgICAgIC8vIEluaXNpYWxpc2FzaSBGaXJlYmFzZSBTdG9yYWdlCiAgICAgICAgdmFyIHN0b3JhZ2UgPSBmaXJlYmFzZS5zdG9yYWdlKCk7CiAgICAgICAgdmFyIHN0b3JhZ2VSZWYgPSBzdG9yYWdlLnJlZigpOwoKICAgICAgICAvLyBJbmlzaWFsaXNhc2kgRmlyZWJhc2UgUmVhbHRpbWUgRGF0YWJhc2UKICAgICAgICB2YXIgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpOwogICAgICAgIHZhciBmaWxlc1JlZiA9IGRhdGFiYXNlLnJlZignaHRtbC1maWxlcycpOwoKICAgICAgICAvLyBJbmlzaWFsaXNhc2kgYXJyYXkgdW50dWsgbWVueWltcGFuIGRhdGEgZmlsZQogICAgICAgIHZhciBmaWxlc0RhdGEgPSBbXTsKCiAgICAgICAgLy8gRnVuZ3NpIHVudHVrIG1lbmRhcGF0a2FuIHRhbmdnYWwgdGVyYWtoaXIga2FsaSBkaW1vZGlmaWthc2kgZGFyaSBGaXJlYmFzZSBTdG9yYWdlCiAgICAgICAgZnVuY3Rpb24gZ2V0TGFzdE1vZGlmaWVkKGZpbGVOYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBzdG9yYWdlUmVmLmNoaWxkKCdodG1sLWZpbGVzLycgKyBmaWxlTmFtZSkuZ2V0TWV0YWRhdGEoKS50aGVuKGZ1bmN0aW9uIChtZXRhZGF0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG1ldGFkYXRhLnVwZGF0ZWQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIEZ1bmdzaSB1bnR1ayBtZW5hbXBpbGthbiBmaWxlIGRhbGFtIHRhYmVsCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheUZpbGVzSW5UYWJsZShmaWxlc0RhdGEpIHsKICAgICAgICAgICAgdmFyIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdGFibGUnKTsKICAgICAgICAgICAgLy8gS29zb25na2FuIHRhYmVsIHNlYmVsdW0gbWVuYW1iYWhrYW4gZGF0YSBiYXJ1CiAgICAgICAgICAgIHRhYmxlLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgLy8gVGFtYmFoa2FuIGp1ZHVsIGtvbG9tCiAgICAgICAgICAgIHZhciB0aGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCk7CiAgICAgICAgICAgIHZhciByb3cgPSB0aGVhZC5pbnNlcnRSb3coKTsKICAgICAgICAgICAgdmFyIGNlbGwxID0gcm93Lmluc2VydENlbGwoMCk7CiAgICAgICAgICAgIHZhciBjZWxsMiA9IHJvdy5pbnNlcnRDZWxsKDEpOwogICAgICAgICAgICB2YXIgY2VsbDMgPSByb3cuaW5zZXJ0Q2VsbCgyKTsKICAgICAgICAgICAgdmFyIGNlbGw0ID0gcm93Lmluc2VydENlbGwoMyk7CiAgICAgICAgICAgIHZhciBjZWxsNSA9IHJvdy5pbnNlcnRDZWxsKDQpOwogICAgICAgICAgICBjZWxsMS5pbm5lckhUTUwgPSAnPGI+RmlsZSBOYW1lPC9iPic7CiAgICAgICAgICAgIGNlbGwyLmlubmVySFRNTCA9ICc8Yj5TaXplPC9iPic7CiAgICAgICAgICAgIGNlbGwzLmlubmVySFRNTCA9ICc8Yj5MaW5rPC9iPic7CiAgICAgICAgICAgIGNlbGw0LmlubmVySFRNTCA9ICc8Yj5WaWV3czwvYj4nOwogICAgICAgICAgICBjZWxsNS5pbm5lckhUTUwgPSAnPGI+VXBkYXRlPC9iPic7CgogICAgICAgICAgICAvLyBUYW1iYWhrYW4gZGF0YSBmaWxlIGtlIGRhbGFtIHRhYmVsCiAgICAgICAgICAgIGZpbGVzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlRGF0YSkgewogICAgICAgICAgICAgICAgYWRkRmlsZVRvVGFibGUoZmlsZURhdGEubmFtZSwgZmlsZURhdGEudXJsLCBmaWxlRGF0YS5zaXplLCBmaWxlRGF0YS52aWV3cywgZmlsZURhdGEubGFzdE1vZGlmaWVkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBWYXJpYWJlbCB1bnR1ayBtZW5nYXR1ciBqdW1sYWggZmlsZSB5YW5nIGFrYW4gZGl0YW1waWxrYW4gcGVyIGhhbGFtYW4KICAgICAgICBjb25zdCBmaWxlc1BlclBhZ2UgPSAxNTsKICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSAxOwoKICAgICAgICAvLyBGdW5nc2kgdW50dWsgbWVuYW1waWxrYW4gZmlsZSBkYWxhbSB0YWJlbCBzZXN1YWkgZGVuZ2FuIGhhbGFtYW4geWFuZyBkaXRhbXBpbGthbgogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlGaWxlc1BlclBhZ2UoZmlsZXNEYXRhLCBwYWdlKSB7CiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gKHBhZ2UgLSAxKSAqIGZpbGVzUGVyUGFnZTsKICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gTWF0aC5taW4oc3RhcnRJbmRleCArIGZpbGVzUGVyUGFnZSwgZmlsZXNEYXRhLmxlbmd0aCk7CiAgICAgICAgICAgIHZhciBmaWxlc1RvU2hvdyA9IGZpbGVzRGF0YS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCk7CiAgICAgICAgICAgIGRpc3BsYXlGaWxlc0luVGFibGUoZmlsZXNUb1Nob3cpOwogICAgICAgIH0KCiAgICAgICAgLy8gUGFuZ2dpbCBmdW5nc2kgZGlzcGxheUZpbGVzUGVyUGFnZSBkZW5nYW4gaGFsYW1hbiBwZXJ0YW1hIHNhYXQgaGFsYW1hbiBkaW11YXQKICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyBEYXBhdGthbiBkYWZ0YXIgZmlsZSBkYXJpIEZpcmViYXNlIFJlYWx0aW1lIERhdGFiYXNlIGRhbiB1cnV0a2FuIGJlcmRhc2Fya2FuIHZpZXdzIHNlY2FyYSBkZXNjZW5kaW5nCiAgICAgICAgICAgIGZpbGVzUmVmLm9yZGVyQnlDaGlsZCgndmlld3MnKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICAgICAgICAgIC8vIFJlc2V0IGRhdGEgZmlsZSBzZWJlbHVtIG1lbmFtYmFoa2FubnlhIGtlbWJhbGkKICAgICAgICAgICAgICAgIGZpbGVzRGF0YSA9IFtdOwoKICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgbWVsYWx1aSBzZXRpYXAgZmlsZSBkYXJpIEZpcmViYXNlIFJlYWx0aW1lIERhdGFiYXNlCiAgICAgICAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVEYXRhID0gY2hpbGRTbmFwc2hvdC52YWwoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlRGF0YS5uYW1lOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlVVJMID0gZmlsZURhdGEudXJsOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlU2l6ZSA9IGZpbGVEYXRhLnNpemU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdzID0gZmlsZURhdGEudmlld3MgfHwgMDsKCiAgICAgICAgICAgICAgICAgICAgLy8gRGFwYXRrYW4gdGFuZ2dhbCB0ZXJha2hpciBrYWxpIGRpbW9kaWZpa2FzaSBkYXJpIEZpcmViYXNlIFN0b3JhZ2UKICAgICAgICAgICAgICAgICAgICBnZXRMYXN0TW9kaWZpZWQoZmlsZU5hbWUpLnRoZW4oZnVuY3Rpb24gKGxhc3RNb2RpZmllZCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGFuZ2dhbCB0ZXJha2hpciBrYWxpIGRpbW9kaWZpa2FzaQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkTGFzdE1vZGlmaWVkID0gbGFzdE1vZGlmaWVkLnRvTG9jYWxlRGF0ZVN0cmluZyh1bmRlZmluZWQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXk6ICdudW1lcmljJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiAnMi1kaWdpdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lWm9uZU5hbWU6ICdzaG9ydCcKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBUYW1iYWhrYW4gaW5mb3JtYXNpIGZpbGUga2UgZGFsYW0gYXJyYXkKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNEYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGZpbGVVUkwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdzOiB2aWV3cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZm9ybWF0dGVkTGFzdE1vZGlmaWVkCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXJ1dGthbiBmaWxlc0RhdGEgYmVyZGFzYXJrYW4gdmlld3Mgc2VjYXJhIGRlc2NlbmRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNEYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLnZpZXdzIC0gYS52aWV3czsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBUYW1waWxrYW4gZmlsZSBkYWxhbSB0YWJlbCBzZXRlbGFoIHBlbmd1cnV0YW4KICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsgLy8gVGFtcGlsa2FuIGhhbGFtYW4gcGVydGFtYQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIC8vIEZ1bmdzaSB1bnR1ayBtZW5hbWJhaGthbiBpbmZvcm1hc2kgZmlsZSBrZSBkYWxhbSB0YWJlbAogICAgICAgIGZ1bmN0aW9uIGFkZEZpbGVUb1RhYmxlKGZpbGVOYW1lLCBmaWxlVVJMLCBmaWxlU2l6ZSwgdmlld3MsIGxhc3RNb2RpZmllZCkgewogICAgICAgICAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS10YWJsZScpOwogICAgICAgICAgICB2YXIgbmV3Um93ID0gdGFibGUuaW5zZXJ0Um93KCk7CiAgICAgICAgICAgIHZhciBjZWxsMSA9IG5ld1Jvdy5pbnNlcnRDZWxsKDApOwogICAgICAgICAgICB2YXIgY2VsbDIgPSBuZXdSb3cuaW5zZXJ0Q2VsbCgxKTsKICAgICAgICAgICAgdmFyIGNlbGwzID0gbmV3Um93Lmluc2VydENlbGwoMik7CiAgICAgICAgICAgIHZhciBjZWxsNCA9IG5ld1Jvdy5pbnNlcnRDZWxsKDMpOwogICAgICAgICAgICB2YXIgY2VsbDUgPSBuZXdSb3cuaW5zZXJ0Q2VsbCg0KTsKCiAgICAgICAgICAgIGNlbGwxLmlubmVySFRNTCA9IGZpbGVOYW1lOwogICAgICAgICAgICBjZWxsMi5pbm5lckhUTUwgPSBmaWxlU2l6ZTsKICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IGZpbGVVUkw7CiAgICAgICAgICAgIGxpbmsudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSAnT3Blbic7CiAgICAgICAgICAgIGNlbGwzLmFwcGVuZENoaWxkKGxpbmspOwogICAgICAgICAgICBjZWxsNC5pbm5lckhUTUwgPSB2aWV3czsKCiAgICAgICAgICAgIC8vIFRhbXBpbGthbiB0YW5nZ2FsIHRlcmFraGlyIGthbGkgZGltb2RpZmlrYXNpCiAgICAgICAgICAgIGNlbGw1LmlubmVySFRNTCA9IGxhc3RNb2RpZmllZDsKCiAgICAgICAgICAgIC8vIFRhbWJhaGthbiBldmVudCBsaXN0ZW5lciB1bnR1ayBtZW5naGl0dW5nIGp1bWxhaCBrbGlrCiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB2YXIgY2xpY2tlZEZpbGVOYW1lID0gZmlsZU5hbWU7CgogICAgICAgICAgICAgICAgZmlsZXNSZWYub3JkZXJCeUNoaWxkKCduYW1lJykuZXF1YWxUbyhjbGlja2VkRmlsZU5hbWUpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlS2V5ID0gT2JqZWN0LmtleXMoc25hcHNob3QudmFsKCkpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlld0NvdW50ID0gKHNuYXBzaG90LnZhbCgpW2ZpbGVLZXldLnZpZXdzIHx8IDApICsgMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBhbiBqdW1sYWggdmlld3MgeWFuZyB0ZWxhaCBkaXRpbmdrYXRrYW4ga2VtYmFsaSBrZSBGaXJlYmFzZSBSZWFsdGltZSBEYXRhYmFzZQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlc1JlZi5jaGlsZChmaWxlS2V5KS51cGRhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld3M6IHZpZXdDb3VudAogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmJhcnVpIHRhbXBpbGFuIGp1bWxhaCB2aWV3cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDQudGV4dENvbnRlbnQgPSB2aWV3Q291bnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBoYWxhbWFuIHNhYXQganVtbGFoIHZpZXdzIHRlbGFoIGRpcGVyYmFydWkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGxpbmsuaHJlZiwgJ19ibGFuaycpOyAvLyBCdWthIHRhdXRhbiBkYWxhbSB0YWIgYmFydQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOyAvLyBSZWxvYWQgaGFsYW1hbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdmlld3M6JywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBUb21ib2wgbmV4dAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0UGFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZSAqIGZpbGVzUGVyUGFnZSA8IGZpbGVzRGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7CiAgICAgICAgICAgICAgICB1cGRhdGVKdW1wUGFnZUlucHV0KCk7CiAgICAgICAgICAgICAgICBkaXNwbGF5RmlsZXNQZXJQYWdlKGZpbGVzRGF0YSwgY3VycmVudFBhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIFRvbWJvbCBwcmV2CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZQYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMSkgewogICAgICAgICAgICAgICAgY3VycmVudFBhZ2UtLTsKICAgICAgICAgICAgICAgIHVwZGF0ZUp1bXBQYWdlSW5wdXQoKTsKICAgICAgICAgICAgICAgIGRpc3BsYXlGaWxlc1BlclBhZ2UoZmlsZXNEYXRhLCBjdXJyZW50UGFnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gVG9tYm9sIGp1bXAgbmV4dAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTmV4dFBhZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBjdXJyZW50UGFnZSA9IE1hdGguY2VpbChmaWxlc0RhdGEubGVuZ3RoIC8gZmlsZXNQZXJQYWdlKTsKICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgdXBkYXRlSnVtcFBhZ2VJbnB1dCgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBUb21ib2wganVtcCBwcmV2CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBQcmV2UGFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgdXBkYXRlSnVtcFBhZ2VJbnB1dCgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBUb21ib2wgbmV4dCAyCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25leHRQYWdlMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZSAqIGZpbGVzUGVyUGFnZSA8IGZpbGVzRGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7CiAgICAgICAgICAgICAgICB1cGRhdGVKdW1wUGFnZUlucHV0KCk7CiAgICAgICAgICAgICAgICBkaXNwbGF5RmlsZXNQZXJQYWdlKGZpbGVzRGF0YSwgY3VycmVudFBhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIFRvbWJvbCBwcmV2IDIKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldlBhZ2UyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMSkgewogICAgICAgICAgICAgICAgY3VycmVudFBhZ2UtLTsKICAgICAgICAgICAgICAgIHVwZGF0ZUp1bXBQYWdlSW5wdXQoKTsKICAgICAgICAgICAgICAgIGRpc3BsYXlGaWxlc1BlclBhZ2UoZmlsZXNEYXRhLCBjdXJyZW50UGFnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gVG9tYm9sIGp1bXAgbmV4dCAyCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBOZXh0UGFnZTInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBjdXJyZW50UGFnZSA9IE1hdGguY2VpbChmaWxlc0RhdGEubGVuZ3RoIC8gZmlsZXNQZXJQYWdlKTsKICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgdXBkYXRlSnVtcFBhZ2VJbnB1dCgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBUb21ib2wganVtcCBwcmV2IDIKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcFByZXZQYWdlMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgdXBkYXRlSnVtcFBhZ2VJbnB1dCgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBGdW5nc2kgdW50dWsgbWVuYW1waWxrYW4gbm90aWZpa2FzaQogICAgICAgIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obWVzc2FnZSkgewogICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmaWNhdGlvbicpOwogICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb24tbWVzc2FnZScpOwogICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdGlmaWNhdGlvbi1idXR0b24nKTsKICAgICAgICAgICAgbm90aWZpY2F0aW9uTWVzc2FnZS5pbm5lclRleHQgPSBtZXNzYWdlOwogICAgICAgICAgICBub3RpZmljYXRpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgogICAgICAgICAgICBub3RpZmljYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBUYW1waWxrYW4gYW5pbWFzaSBsb2FkaW5nCiAgICAgICAgZnVuY3Rpb24gc2hvd0xvYWRpbmdBbmltYXRpb24oKSB7CiAgICAgICAgICAgIHZhciBsb2FkaW5nQW5pbWF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctYW5pbWF0aW9uJyk7CiAgICAgICAgICAgIGxvYWRpbmdBbmltYXRpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgogICAgICAgICAgICAvLyBSZXNldCBuaWxhaSBwZXJzZW50YXNlCiAgICAgICAgICAgIGN1cnJlbnRQcm9ncmVzcyA9IDA7CiAgICAgICAgICAgIHZhciBsb2FkaW5nUGVyY2VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nLXBlcmNlbnQnKTsKICAgICAgICAgICAgbG9hZGluZ1BlcmNlbnQuaW5uZXJUZXh0ID0gJzAlJzsKCiAgICAgICAgICAgIC8vIEphbGFua2FuIGZ1bmdzaSB1cGRhdGVQcm9ncmVzcyBzZXRpYXAgNDBtcyB1bnR1ayBtZW5ndXBkYXRlIHBlcnNlbnRhc2UKICAgICAgICAgICAgdmFyIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVQcm9ncmVzcywgNDApOwoKICAgICAgICAgICAgLy8gRnVuZ3NpIHVudHVrIG1lbmd1cGRhdGUgcGVyc2VudGFzZQogICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9ncmVzcyArPSAxOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQcm9ncmVzcyA8PSAxMDApIHsKICAgICAgICAgICAgICAgICAgICBsb2FkaW5nUGVyY2VudC5pbm5lclRleHQgPSBjdXJyZW50UHJvZ3Jlc3MgKyAnJSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFNlbWJ1bnlpa2FuIGFuaW1hc2kgbG9hZGluZwogICAgICAgIGZ1bmN0aW9uIGhpZGVMb2FkaW5nQW5pbWF0aW9uKCkgewogICAgICAgICAgICB2YXIgbG9hZGluZ0FuaW1hdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLWFuaW1hdGlvbicpOwogICAgICAgICAgICBsb2FkaW5nQW5pbWF0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICAvLyBGdW5nc2kgdW50dWsgbWVuZ3VrdXIgdWt1cmFuIGZpbGUKICAgICAgICBmdW5jdGlvbiBmb3JtYXRCeXRlcyhieXRlcywgZGVjaW1hbHMgPSAyKSB7CiAgICAgICAgICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEJ5dGVzJzsKCiAgICAgICAgICAgIGNvbnN0IGsgPSAxMDI0OwogICAgICAgICAgICBjb25zdCBkbSA9IGRlY2ltYWxzIDwgMCA/IDAgOiBkZWNpbWFsczsKICAgICAgICAgICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJywgJ1BCJywgJ0VCJywgJ1pCJywgJ1lCJ107CgogICAgICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7CgogICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZChkbSkpICsgJyAnICsgc2l6ZXNbaV07CiAgICAgICAgfQoKICAgICAgICAvLyBGdW5nc2kgdW50dWsgbWVtcGVyYmFydWkgbmlsYWkgaW5wdXQganVtcGFnZQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUp1bXBQYWdlSW5wdXQoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wYWdlJykudmFsdWUgPSBjdXJyZW50UGFnZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBhZ2UyJykudmFsdWUgPSBjdXJyZW50UGFnZTsKICAgICAgICB9CgogICAgICAgIC8vIFRhbWJhaGthbiBldmVudCBsaXN0ZW5lciB1bnR1ayBpbnB1dCBqdW1wYWdlCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBhZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIganVtcFBhZ2VJbnB1dCA9IHBhcnNlSW50KHRoaXMudmFsdWUpOwogICAgICAgICAgICBpZiAoIWlzTmFOKGp1bXBQYWdlSW5wdXQpICYmIGp1bXBQYWdlSW5wdXQgPj0gMSAmJiBqdW1wUGFnZUlucHV0IDw9IE1hdGguY2VpbChmaWxlc0RhdGEubGVuZ3RoIC8gZmlsZXNQZXJQYWdlKSkgewogICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBqdW1wUGFnZUlucHV0OwogICAgICAgICAgICAgICAgZGlzcGxheUZpbGVzUGVyUGFnZShmaWxlc0RhdGEsIGN1cnJlbnRQYWdlKTsKICAgICAgICAgICAgICAgIHVwZGF0ZUp1bXBQYWdlSW5wdXQoKTsgLy8gUGVyYmFydWkganVnYSBpbnB1dCBwYWRhIGJhZ2lhbiBiYXdhaAogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIFRhbWJhaGthbiBldmVudCBsaXN0ZW5lciB1bnR1ayBpbnB1dCBqdW1wYWdlMgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wYWdlMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBqdW1wUGFnZUlucHV0ID0gcGFyc2VJbnQodGhpcy52YWx1ZSk7CiAgICAgICAgICAgIGlmICghaXNOYU4oanVtcFBhZ2VJbnB1dCkgJiYganVtcFBhZ2VJbnB1dCA+PSAxICYmIGp1bXBQYWdlSW5wdXQgPD0gTWF0aC5jZWlsKGZpbGVzRGF0YS5sZW5ndGggLyBmaWxlc1BlclBhZ2UpKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGp1bXBQYWdlSW5wdXQ7CiAgICAgICAgICAgICAgICBkaXNwbGF5RmlsZXNQZXJQYWdlKGZpbGVzRGF0YSwgY3VycmVudFBhZ2UpOwogICAgICAgICAgICAgICAgdXBkYXRlSnVtcFBhZ2VJbnB1dCgpOyAvLyBQZXJiYXJ1aSBqdWdhIGlucHV0IHBhZGEgYmFnaWFuIGF0YXMKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKLy8gVGFtYmFoa2FuIGV2ZW50IGxpc3RlbmVyIHVudHVrIGZvcm0gcGVuY2FyaWFuCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZGpzJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZXZlbnQpIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIE1lbmNlZ2FoIHBlbmdpcmltYW4gZm9ybSBzZWNhcmEgZGVmYXVsdAoKICAgIC8vIERhcGF0a2FuIG5pbGFpIGlucHV0IHBlbmNhcmlhbgogICAgdmFyIHNlYXJjaFRlcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRhbmpzJykudmFsdWUudG9Mb3dlckNhc2UoKTsKCiAgICAvLyBGaWx0ZXIgZGF0YSBmaWxlIGJlcmRhc2Fya2FuIG5hbWEgZmlsZSB5YW5nIGNvY29rIGRlbmdhbiBpbnB1dCBwZW5jYXJpYW4KICAgIHZhciBmaWx0ZXJlZEZpbGVzRGF0YSA9IGZpbGVzRGF0YS5maWx0ZXIoZnVuY3Rpb24oZmlsZSkgewogICAgICAgIHJldHVybiBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKTsKICAgIH0pOwoKICAgIC8vIFRhbXBpbGthbiBmaWxlIHlhbmcgc3VkYWggZGlmaWx0ZXIgZGFsYW0gdGFiZWwKICAgIGRpc3BsYXlGaWxlc1BlclBhZ2UoZmlsdGVyZWRGaWxlc0RhdGEsIDEpOyAvLyBNZW5hbXBpbGthbiBoYWxhbWFuIHBlcnRhbWEgZGFyaSBoYXNpbCBwZW5jYXJpYW4KICAgIGN1cnJlbnRQYWdlID0gMTsgLy8gU2V0IGhhbGFtYW4gc2FhdCBpbmkga2VtYmFsaSBrZSBoYWxhbWFuIHBlcnRhbWEKICAgIHVwZGF0ZUp1bXBQYWdlSW5wdXQoKTsgLy8gUGVyYmFydWkgaW5wdXQganVtcGFnZQoKICAgIC8vIFBlcmJhcnVpIGtldGVyYW5nYW4gbmFtYSB5YW5nIGRpY2FyaQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1pbmZvJykudGV4dENvbnRlbnQgPSAnU2VhcmNoIGZvcjogJyArIHNlYXJjaFRlcm07CgogICAgLy8gU2VtYnVueWlrYW4gZm9ybSBwZW5jYXJpYW4KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gnKS5zdHlsZS5kaXNwbGF5ID0gJ3RydWUnOwp9KTsKCi8vIFRhbWJhaGthbiBldmVudCBsaXN0ZW5lciB1bnR1ayB0b21ib2wgbmF2aWdhc2kgKG5leHQsIHByZXYsIGRsbC4pIGRpIGJhZ2lhbiBhdGFzCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0UGFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTmF2aWdhdGlvbkJ1dHRvbkNsaWNrKTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZQYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOYXZpZ2F0aW9uQnV0dG9uQ2xpY2spOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcE5leHRQYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOYXZpZ2F0aW9uQnV0dG9uQ2xpY2spOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcFByZXZQYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOYXZpZ2F0aW9uQnV0dG9uQ2xpY2spOwoKLy8gVGFtYmFoa2FuIGV2ZW50IGxpc3RlbmVyIHVudHVrIHRvbWJvbCBuYXZpZ2FzaSAobmV4dCwgcHJldiwgZGxsLikgZGkgYmFnaWFuIGJhd2FoCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0UGFnZTInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU5hdmlnYXRpb25CdXR0b25DbGljayk7CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2UGFnZTInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU5hdmlnYXRpb25CdXR0b25DbGljayk7CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTmV4dFBhZ2UyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOYXZpZ2F0aW9uQnV0dG9uQ2xpY2spOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcFByZXZQYWdlMicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTmF2aWdhdGlvbkJ1dHRvbkNsaWNrKTsKCi8vIEZ1bmdzaSBldmVudCBsaXN0ZW5lciB1bnR1ayBzZW11YSB0b21ib2wgbmF2aWdhc2kKZnVuY3Rpb24gaGFuZGxlTmF2aWdhdGlvbkJ1dHRvbkNsaWNrKGUpIHsKICAgIC8vIFBlcmJhcnVpIGhhbGFtYW4gZGFuIHNlbWJ1bnlpa2FuIGtldGVyYW5nYW4gcGVuY2FyaWFuCiAgICB1cGRhdGVKdW1wUGFnZUlucHV0KCk7CiAgICBkaXNwbGF5RmlsZXNQZXJQYWdlKGZpbGVzRGF0YSwgY3VycmVudFBhZ2UpOwogICAgaGlkZVNlYXJjaEluZm8oKTsgLy8gU2VtYnVueWlrYW4ga2V0ZXJhbmdhbiBwZW5jYXJpYW4KfQoKLy8gVGFtYmFoa2FuIGZ1bmdzaSB1bnR1ayBtZW55ZW1idW55aWthbiBrZXRlcmFuZ2FuIHBlbmNhcmlhbgpmdW5jdGlvbiBoaWRlU2VhcmNoSW5mbygpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtaW5mbycpLnRleHRDb250ZW50ID0gJyc7IC8vIEtvc29uZ2thbiBrZXRlcmFuZ2FuIHBlbmNhcmlhbgp9Cgpjb25zdCBucHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb2t1c2VhcmNoJyk7CmlmIChucHNlYXJjaCkgewogICAgbnBzZWFyY2gub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dHNlYXJjaCcpLmZvY3VzKCk7CiAgICAgICAgfSwgNTApOwogICAgfTsKfQoKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZC1mb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZXZlbnQpIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIE1lbmNlZ2FoIHBlbmdpcmltYW4gZm9ybSBzZWNhcmEgZGVmYXVsdAoKICAgIHZhciBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHRtbC1maWxlJykuZmlsZXNbMF07CiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlSW5wdXQubmFtZTsKICAgIHZhciBmaWxlUmVmID0gc3RvcmFnZVJlZi5jaGlsZCgnaHRtbC1maWxlcy8nICsgZmlsZU5hbWUpOwoKICAgIC8vIFRhbXBpbGthbiBhbmltYXNpIGxvYWRpbmcKICAgIHNob3dMb2FkaW5nQW5pbWF0aW9uKCk7CgogICAgLy8gVXBsb2FkIGZpbGUga2UgRmlyZWJhc2UgU3RvcmFnZQogICAgZmlsZVJlZi5wdXQoZmlsZUlucHV0KS50aGVuKGZ1bmN0aW9uKHNuYXBzaG90KSB7CiAgICAgICAgLy8gRGFwYXRrYW4gVVJMIGRvd25sb2FkIGZpbGUgeWFuZyBkaXVuZ2dhaAogICAgICAgIHNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24oZG93bmxvYWRVUkwpIHsKICAgICAgICAgICAgLy8gU2ltcGFuIGluZm9ybWFzaSBmaWxlIGtlIEZpcmViYXNlIFJlYWx0aW1lIERhdGFiYXNlCiAgICAgICAgICAgIGZpbGVzUmVmLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICB1cmw6IGRvd25sb2FkVVJMLAogICAgICAgICAgICAgICAgc2l6ZTogZm9ybWF0Qnl0ZXMoZmlsZUlucHV0LnNpemUpLAogICAgICAgICAgICAgICAgdmlld3M6IDAsIC8vIFNldCB2aWV3cyBhd2FsIGtlIDAKICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpIC8vIFRhbmdnYWwgdGVyYWtoaXIga2FsaSBkaW1vZGlmaWthc2kKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIFNlbWJ1bnlpa2FuIGFuaW1hc2kgbG9hZGluZyBzZXRlbGFoIHBlbmd1bmdnYWhhbiBzZWxlc2FpCiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0FuaW1hdGlvbigpOwoKICAgICAgICAgICAgICAgIC8vIFRhbXBpbGthbiBub3RpZmlrYXNpIHBlbmd1bmdnYWhhbiBiZXJoYXNpbAogICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignRmlsZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHkhJyk7CgogICAgICAgICAgICAgICAgLy8gUmVzZXQgbmlsYWkgaW5wdXQgZmlsZQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h0bWwtZmlsZScpLnZhbHVlID0gJyc7CgogICAgICAgICAgICAgICAgLy8gUmVmcmVzaCBoYWxhbWFuIHVudHVrIG1lbmFtcGlsa2FuIGZpbGUgeWFuZyBiYXJ1IGRpdW5nZ2FoCiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIFNlbWJ1bnlpa2FuIGFuaW1hc2kgbG9hZGluZyBqaWthIHRlcmphZGkga2VzYWxhaGFuCiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZ0FuaW1hdGlvbigpOwoKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBmaWxlIGluZm86JywgZXJyb3IpOwogICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignRXJyb3Igc2F2aW5nIGZpbGUgaW5mby4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgIC8vIFNlbWJ1bnlpa2FuIGFuaW1hc2kgbG9hZGluZyBqaWthIHRlcmphZGkga2VzYWxhaGFuCiAgICAgICAgaGlkZUxvYWRpbmdBbmltYXRpb24oKTsKCiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGU6JywgZXJyb3IpOwogICAgICAgIHNob3dOb3RpZmljYXRpb24oJ0Vycm9yIHVwbG9hZGluZyBmaWxlLiBQbGVhc2UgdHJ5IGFnYWluLicpOwogICAgfSk7Cn0pOwovLyBGdW5nc2kgdW50dWsgbWVuYW1waWxrYW4gbm90aWZpa2FzaQpmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKG1lc3NhZ2UpIHsKICAgIC8vIEFuZGEgZGFwYXQgbWVuZ2d1bmFrYW4gY2FyYSB0ZXJ0ZW50dSB1bnR1ayBtZW5hbXBpbGthbiBub3RpZmlrYXNpLAogICAgLy8gbWlzYWxueWEgZGVuZ2FuIG1lbmdndW5ha2FuIGFsZXJ0IGF0YXUgbWVuYW1waWxrYW4gcGVzYW4gZGkgZWxlbWVuIEhUTUwKICAgIC8vIERpIHNpbmksIHNheWEgYWthbiBtZW5nZ3VuYWthbiBhbGVydCB1bnR1ayB0dWp1YW4gZGVtb25zdHJhc2kKICAgIGFsZXJ0KG1lc3NhZ2UpOwp9CgovLyBNZW1pbGloIGVsZW1lbiBmb3JtCnZhciB1cGxvYWRGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZC1mb3JtJyk7CgovLyBNZW5hbWJhaGthbiBldmVudCBsaXN0ZW5lciB1bnR1ayBmb3JtIHN1Ym1pdAp1cGxvYWRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBNZW5jZWdhaCBwZW5naXJpbWFuIGZvcm0gc2VjYXJhIGRlZmF1bHQKCiAgICB2YXIgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h0bWwtZmlsZScpLmZpbGVzWzBdOwoKICAgIC8vIEppa2EgdGlkYWsgYWRhIGZpbGUgeWFuZyBkaXBpbGloCiAgICBpZiAoIWZpbGVJbnB1dCkgewogICAgICAgIC8vIFRhbXBpbGthbiBub3RpZmlrYXNpIGtlcGFkYSBwZW5nZ3VuYQogICAgICAgIHNob3dOb3RpZmljYXRpb24oJ1BsZWFzZSBzZWxlY3QgYSBmaWxlIHRvIHVwbG9hZCEnKTsKICAgICAgICByZXR1cm47IC8vIEhlbnRpa2FuIGVrc2VrdXNpIGZ1bmdzaQogICAgfQoKICAgIHZhciBmaWxlTmFtZSA9IGZpbGVJbnB1dC5uYW1lOwogICAgdmFyIGZpbGVSZWYgPSBzdG9yYWdlUmVmLmNoaWxkKCdodG1sLWZpbGVzLycgKyBmaWxlTmFtZSk7CgogICAgLy8gVGFtcGlsa2FuIGFuaW1hc2kgbG9hZGluZwogICAgc2hvd0xvYWRpbmdBbmltYXRpb24oKTsKCiAgICAvLyBVcGxvYWQgZmlsZSBrZSBGaXJlYmFzZSBTdG9yYWdlCiAgICBmaWxlUmVmLnB1dChmaWxlSW5wdXQpLnRoZW4oZnVuY3Rpb24oc25hcHNob3QpIHsKICAgICAgICAvLyBEYXBhdGthbiBVUkwgZG93bmxvYWQgZmlsZSB5YW5nIGRpdW5nZ2FoCiAgICAgICAgc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbihkb3dubG9hZFVSTCkgewogICAgICAgICAgICAvLyBTaW1wYW4gaW5mb3JtYXNpIGZpbGUga2UgRmlyZWJhc2UgUmVhbHRpbWUgRGF0YWJhc2UKICAgICAgICAgICAgZmlsZXNSZWYucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBmaWxlTmFtZSwKICAgICAgICAgICAgICAgIHVybDogZG93bmxvYWRVUkwsCiAgICAgICAgICAgICAgICBzaXplOiBmb3JtYXRCeXRlcyhmaWxlSW5wdXQuc2l6ZSksCiAgICAgICAgICAgICAgICB2aWV3czogMCwgLy8gU2V0IHZpZXdzIGF3YWwga2UgMAogICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCkgLy8gVGFuZ2dhbCB0ZXJha2hpciBrYWxpIGRpbW9kaWZpa2FzaQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gU2VtYnVueWlrYW4gYW5pbWFzaSBsb2FkaW5nIHNldGVsYWggcGVuZ3VuZ2dhaGFuIHNlbGVzYWkKICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nQW5pbWF0aW9uKCk7CgogICAgICAgICAgICAgICAgLy8gVGFtcGlsa2FuIG5vdGlmaWthc2kgcGVuZ3VuZ2dhaGFuIGJlcmhhc2lsCiAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCdGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKTsKCiAgICAgICAgICAgICAgICAvLyBSZXNldCBuaWxhaSBpbnB1dCBmaWxlCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHRtbC1maWxlJykudmFsdWUgPSAnJzsKCiAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIGhhbGFtYW4gdW50dWsgbWVuYW1waWxrYW4gZmlsZSB5YW5nIGJhcnUgZGl1bmdnYWgKICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgLy8gU2VtYnVueWlrYW4gYW5pbWFzaSBsb2FkaW5nIGppa2EgdGVyamFkaSBrZXNhbGFoYW4KICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nQW5pbWF0aW9uKCk7CgogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgaW5mbzonLCBlcnJvcik7CiAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCdFcnJvciBzYXZpbmcgZmlsZSBpbmZvLiBQbGVhc2UgdHJ5IGFnYWluLicpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgLy8gU2VtYnVueWlrYW4gYW5pbWFzaSBsb2FkaW5nIGppa2EgdGVyamFkaSBrZXNhbGFoYW4KICAgICAgICBoaWRlTG9hZGluZ0FuaW1hdGlvbigpOwoKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGxvYWRpbmcgZmlsZTonLCBlcnJvcik7CiAgICAgICAgc2hvd05vdGlmaWNhdGlvbignRXJyb3IgdXBsb2FkaW5nIGZpbGUuIFBsZWFzZSB0cnkgYWdhaW4uJyk7CiAgICB9KTsKfSk7CmNvbnN0IHRhcmdldERvbWFpbiA9ICdoYXhvcnVwbG9hZGVyLmJsb2dzcG90LmNvbSc7CmZ1bmN0aW9uIGNyZWF0ZUFsZXJ0Qm94KG1lc3NhZ2UpIHsKICBjb25zdCBhbGVydEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGFsZXJ0Qm94LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWxlcnRCb3gnKTsKICBhbGVydEJveC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgYWxlcnRCb3guc3R5bGUudG9wID0gJzUwcHgnOwogIGFsZXJ0Qm94LnN0eWxlLmxlZnQgPSAnNTAlJzsKICBhbGVydEJveC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtNTAlKSc7CiAgYWxlcnRCb3guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmMmYyZjInOwogIGFsZXJ0Qm94LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2RkZCc7CiAgYWxlcnRCb3guc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7CiAgYWxlcnRCb3guc3R5bGUucGFkZGluZyA9ICcyMHB4JzsKICBhbGVydEJveC5zdHlsZS5ib3hTaGFkb3cgPSAnMCAycHggNHB4IHJnYmEoMCwwLDAsMC4yKSc7CiAgYWxlcnRCb3guc3R5bGUuekluZGV4ID0gJzk5OTknOwogIGFsZXJ0Qm94LmlubmVySFRNTCA9IGA8c3Ryb25nPlBFUklOR0FUQU4hPC9zdHJvbmc+ICR7bWVzc2FnZX1gOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWxlcnRCb3gpOwoKICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYWxlcnRCb3gpOwogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly9oYXhvcnVwbG9hZGVyLmJsb2dzcG90LmNvbSc7CiAgfSwgMTAwMDApOwp9Cgpjb25zdCBjdXJyZW50RG9tYWluID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwoKaWYgKGN1cnJlbnREb21haW4gIT09IHRhcmdldERvbWFpbikgewogIGNyZWF0ZUFsZXJ0Qm94KCdTdW1iZXIgRGF5YSBJbmkgRGlhbWFua2FuIE9sZWggQWhsaSBLZWFtYW5hbi4gRGlsYXJhbmcgTWVuZ2Frc2VzIFRhbnBhIEl6aW4uJyk7Cn0K';

function runDecryptedCode(encryptedCode) {
    const decodedCode = atob(encryptedCode);
    eval(decodedCode);
}

runDecryptedCode(encryptedCode);
